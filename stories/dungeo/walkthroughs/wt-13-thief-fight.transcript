title: Thief Fight + Egg/Canary/Bauble
story: dungeo
description: Give egg to thief at Treasure Room, kill thief, collect canary from opened egg, wind canary in forest for bauble. Restores from wt-12.
---

# Restore state from wt-12 (player at Living Room with torch and lantern)
$restore wt-12

# ============================================================================
# GOAL: Drop everything except torch and lantern
# ============================================================================

[GOAL: Lighten inventory for thief fight]

# Drop accumulated items from earlier walkthroughs (IF-gated since thief may have stolen some)
[IF: inventory contains "bell"]
> drop bell
[OK: contains "Dropped"]
[END IF]

[IF: inventory contains "book"]
> drop book
[OK: contains "Dropped"]
[END IF]

[IF: inventory contains "candles"]
> drop candles
[OK: contains "Dropped"]
[END IF]

[IF: inventory contains "blue cake"]
> drop blue cake
[OK: contains "Dropped"]
[END IF]

[IF: inventory contains "eat-me cake"]
> drop eat-me cake
[OK: contains "Dropped"]
[END IF]

[IF: inventory contains "sack"]
> drop sack
[OK: contains "Dropped"]
[END IF]

> inventory
[OK: contains "torch"]
[OK: contains "lantern"]

[END GOAL]

# ============================================================================
# GOAL: Get nasty knife from Attic
# ============================================================================

[GOAL: Get nasty knife from Attic]
[ENSURES: inventory contains "knife"]

# Living Room → Kitchen → Attic
> east
[OK: contains "Kitchen"]

> up
[OK: contains "Attic"]

> take nasty knife
[OK: contains "Taken"]

# Also grab volcano supplies while here (needed in wt-15)
> take brick
[OK: contains "Taken"]

> take shiny wire
[OK: contains "Taken"]

# Attic → Kitchen → Living Room
> down
[OK: contains "Kitchen"]

> west
[OK: contains "Living Room"]

# Drop volcano supplies at Living Room for wt-15
> drop brick
[OK: contains "Dropped"]

> drop shiny wire
[OK: contains "Dropped"]

[END GOAL]

# ============================================================================
# GOAL: Take egg from trophy case
# ============================================================================

[GOAL: Take egg from trophy case]

> open trophy case
[OK: contains "open"]

> take egg
[OK: contains "Taken"]

[END GOAL]

# ============================================================================
# GOAL: Navigate to Treasure Room and give egg to thief
# ============================================================================

[GOAL: Give egg to thief at Treasure Room]

# Switch to lantern (thief may steal torch underground)
> turn on lantern
[OK: contains "on"]

# Open trapdoor if needed
> open trap door
[OK: contains "open"]

# Living Room → Cellar
> down
[OK: contains "Cellar"]

# Cellar → Troll Room (troll dead from wt-01)
> east
[OK: contains "Troll Room"]

# Maze path (same as wt-03): S, E, W, UP, SW, E, S, NE → Cyclops Room
> south
[OK: contains "Maze"]

> east
[OK: contains "Maze"]

> west
[OK: contains "Maze"]

> up
[OK: contains "Maze"]

> southwest
[OK: contains "Maze"]

> east
[OK: contains "Maze"]

> south
[OK: contains "Maze"]

> northeast
[OK: contains "Cyclops Room"]

# Cyclops Room → Treasure Room (thief summoned by treasure-room-handler)
> up
[OK: contains "Treasure Room"]

# Give the egg to the thief
> give egg to thief
[OK: contains "egg"]

# Leave immediately so thief deposits at lair on his next turn (player absent)
> down
[OK: contains "Cyclops"]

# Wait for thief to process lair deposit (opens egg, drops treasures)
> wait
[OK: contains "Time passes"]

> wait
[OK: contains "Time passes"]

[END GOAL]

# ============================================================================
# GOAL: Kill the thief
# ============================================================================

[GOAL: Kill the thief]
[ENSURES: not entity "seedy-looking thief" alive]

# Return to Treasure Room for the fight
> up
[OK: contains "Treasure Room"]

# Fight thief with nasty knife. DO/UNTIL loops until thief dies or player dies.
[RETRY: max=5]
[DO]
> attack thief with knife
[OK: contains "thief"]
[UNTIL "fog" OR "carcass" OR "Finishing you off"]
[ENSURES: not entity "seedy-looking thief" alive]
[END RETRY]

[END GOAL]

# ============================================================================
# GOAL: Collect canary from opened egg, egg, and chalice
# ============================================================================

[GOAL: Collect canary, egg, and chalice]

> drop knife
[OK: contains "Dropped"]

# Egg was opened by thief and dropped on floor. Canary is inside the open egg.
> take canary
[OK: contains "Taken"]

> take egg
[OK: contains "Taken"]

> take chalice
[OK: contains "Taken"]

# Recover torch if thief stole it
[IF: room contains "torch"]
> take torch
[OK: contains "Taken"]
[END IF]

[END GOAL]

# ============================================================================
# GOAL: Wind canary in forest for bauble
# ============================================================================

[GOAL: Wind canary for bauble]
[ENSURES: inventory contains "bauble"]

# Return to Living Room via Strange Passage
> down
[OK: contains "Cyclops"]

> north
[OK: contains "Living Room"]

# Navigate to forest
$teleport Forest Path

> look
[OK: contains "Forest"]

# Wind the canary to summon songbird and get bauble
> wind canary
[OK: contains "bauble"]

> take bauble
[OK: contains "Taken"]

[END GOAL]

# ============================================================================
# GOAL: Store treasures in trophy case
# ============================================================================

[GOAL: Store treasures in trophy case]

$teleport Living Room

> open trophy case
[OK: contains "open"]

> put canary in trophy case
[OK: contains "put"]

> put bauble in trophy case
[OK: contains "put"]

> put chalice in trophy case
[OK: contains "put"]

> put egg in trophy case
[OK: contains "put"]

[END GOAL]

# ============================================================================
# GOAL: Recover stolen treasures from Treasure Room (thief's lair)
# ============================================================================

[GOAL: Recover stolen treasures]

# After thief death, stolen items are visible on Treasure Room floor
$teleport Treasure Room

[IF: room contains "grail"]
> take grail
[OK: contains "Taken"]
[END IF]

[IF: room contains "trident"]
> take trident
[OK: contains "Taken"]
[END IF]

[IF: room contains "coins"]
> take bag of coins
[OK: contains "Taken"]
[END IF]

[IF: room contains "figurine"]
> take jade figurine
[OK: contains "Taken"]
[END IF]

# Store recovered items in trophy case
$teleport Living Room

> open trophy case
[OK: contains "open"]

[IF: inventory contains "grail"]
> put grail in trophy case
[OK: contains "put"]
[END IF]

[IF: inventory contains "trident"]
> put trident in trophy case
[OK: contains "put"]
[END IF]

[IF: inventory contains "coins"]
> put bag of coins in trophy case
[OK: contains "put"]
[END IF]

[IF: inventory contains "figurine"]
> put jade in trophy case
[OK: contains "put"]
[END IF]

[END GOAL]

# ============================================================================
# GOAL: Verify final state
# ============================================================================

[GOAL: Verify state for next segment]

> inventory
[OK: contains "torch"]
[OK: contains "lantern"]

> look
[OK: contains "Living Room"]
[OK: contains "trophy case"]

[END GOAL]

$save wt-13
