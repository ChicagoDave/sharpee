title: Exorcism (Bell/Book/Candle Ritual)
story: dungeo
description: Perform exorcism ritual at Entry to Hades. Restores from wt-06.
---

# Restore state from wt-06 (player at Living Room with torch + lantern)
$restore wt-06

# ============================================================================
# GOAL: Verify starting state
# ============================================================================

[GOAL: Verify starting state]

> look
[OK: contains "Living Room"]

> inventory
[OK: contains "torch"]
[OK: contains "lantern"]

[END GOAL]

# ============================================================================
# GOAL: Navigate to Round Room
# Living Room -> Cellar -> Troll Room -> EW Passage -> Round Room
# ============================================================================

[GOAL: Navigate to Round Room]

> down
[OK: contains "Cellar"]

> east
[OK: contains "Troll Room"]

> north
[OK: contains "East-West Passage"]

> east
[OK: contains "Round Room"]

[END GOAL]

# ============================================================================
# GOAL: Traverse Round Room carousel to Grail Room
# Carousel is spinning (isFixed=false) - exits are randomized.
# Any direction you pick, you land at a random exit EXCEPT where you tried to go.
# Use DO-UNTIL: go south (not east, since east=Grail Room would be excluded),
# handle each possible landing, navigate back to Round Room, repeat.
# ============================================================================

[GOAL: Get to Grail Room via carousel]

[WHILE: not location = "Grail Room"]
  > south
  [OK: contains_any "Engravings Cave" "Grail Room" "North/South Passage" "Winding Passage" "Deep Canyon" "Maze" "East/West Passage"]
  [IF: location = "East-West Passage"]
    > east
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "Deep Canyon"]
    > southeast
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "North/South Passage"]
    > southwest
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "Winding Passage"]
    > northwest
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "Engravings Cave"]
    > north
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "Maze"]
    > northeast
    [OK: contains "Round Room"]
  [END IF]
[END WHILE]

[END GOAL]

# ============================================================================
# GOAL: Navigate to Altar and collect exorcism items
# Grail Room -> UP -> Temple -> E -> Altar
# ============================================================================

[GOAL: Get exorcism items]
[ENSURES: inventory contains "bell"]
[ENSURES: inventory contains "book"]
[ENSURES: inventory contains "candles"]

> up
[OK: contains "Temple"]

> east
[OK: contains "Altar"]

> take bell
[OK: contains "Taken"]

> take book
[OK: contains "Taken"]

> take candles
[OK: contains "Taken"]

[END GOAL]

# ============================================================================
# GOAL: Navigate to Entrance to Hades
# Altar -> W -> Temple -> D -> Grail Room -> E -> Narrow Crawlway
# -> SW -> Mirror Room -> E -> Cave -> D -> Entrance to Hades
# ============================================================================

[GOAL: Get to Entrance to Hades]

> west
[OK: contains "Temple"]

> down
[OK: contains "Grail Room"]

> east
[OK: contains "Narrow Crawlway"]

> southwest
[OK: contains "Mirror Room"]

> east
[OK: contains "Cave"]

> down
[OK: contains "Entrance to Hades"]

[END GOAL]

# ============================================================================
# GOAL: Perform exorcism ritual
# Ring bell, read book, light candles (order doesn't matter)
# Daemon checks completion each turn - wait after all three steps
# ============================================================================

[GOAL: Perform exorcism]

# Step 1: Ring the bell
> ring bell
[OK: contains "resonant"]

# Step 2: Read the black book
> read book
[OK: contains "exorcism"]

# Step 3: Light the candles
> turn on candles
[OK: contains "on"]

# Wait a turn for the exorcism daemon to complete the ritual
> wait
[OK: contains "Time passes"]

[END GOAL]

# ============================================================================
# GOAL: Verify exorcism success - passage east should be open
# ============================================================================

[GOAL: Verify exorcism success]

> east
[OK: contains "Land of the Dead"]

[END GOAL]

# ============================================================================
# GOAL: Return to Living Room
# Land of Dead -> W -> Hades -> UP -> Cave -> W -> Mirror Room
# -> NE -> Narrow Crawlway -> W -> Grail Room -> W -> Round Room
# -> carousel WHILE -> Maze -> W -> Troll Room -> W -> Cellar
# -> UP -> Living Room
# ============================================================================

[GOAL: Return to Living Room]

# Back through Hades to Cave
> west
[OK: contains "Entrance to Hades"]

> up
[OK: contains "Cave"]

# Cave -> Mirror Room -> Narrow Crawlway -> Grail Room
> west
[OK: contains "Mirror Room"]

> northeast
[OK: contains "Narrow Crawlway"]

> west
[OK: contains "Grail Room"]

# Enter Round Room (carousel is still spinning)
> west
[OK: contains "Round Room"]

# Traverse carousel to reach Maze (Maze-01 has WEST -> Troll Room)
[WHILE: not location = "Maze"]
  > south
  [OK: contains_any "Engravings Cave" "Grail Room" "North/South Passage" "Winding Passage" "Deep Canyon" "Maze" "East/West Passage"]
  [IF: location = "East-West Passage"]
    > east
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "Deep Canyon"]
    > southeast
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "North/South Passage"]
    > southwest
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "Winding Passage"]
    > northwest
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "Engravings Cave"]
    > north
    [OK: contains "Round Room"]
  [END IF]
  [IF: location = "Grail Room"]
    > west
    [OK: contains "Round Room"]
  [END IF]
[END WHILE]

# Maze-01 -> Troll Room -> Cellar -> Living Room
> west
[OK: contains "Troll Room"]

> west
[OK: contains "Cellar"]

> up
[OK: contains "Living Room"]

[END GOAL]

# ============================================================================
# GOAL: Verify final state for next segment
# ============================================================================

[GOAL: Verify inventory for next segment]

> inventory
[OK: contains "torch"]
[OK: contains "lantern"]

> look
[OK: contains "Living Room"]

[END GOAL]

# Save checkpoint for next walkthrough
$save wt-07

# SUCCESS! Exorcism complete
# Spirits banished, passage to Land of Dead now open
# Player in Living Room with torch + lantern + bell + book + candles
# Ready for next segment
