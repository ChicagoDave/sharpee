title: Cake Mechanics (Tea Room / Well Area)
story: dungeo
description: Tests eat-me cake teleport, blue cake return, red cake pool dissolve, and cake visibility

---

# Setup - get light and teleport to Tea Room
> gdt
[OK: contains "GDT ready"]
[EVENT: true, type="action.success"]

> tk brass lantern
[OK: contains "Taken"]

> ex
[OK: contains "Returning to game"]

> turn on lantern
[OK: contains "switches on"]

> gdt
[OK: contains "GDT ready"]

> ah Tea Room
[OK: contains "Teleported to: Tea Room"]

> ex
[OK: contains "Returning to game"]

# Verify Tea Room has all 4 cakes
> look
[OK: contains "cakes"]

# ============================================================
# Test 1: Eat-Me cake teleports to Posts Room
# ============================================================

> eat eat-me cake
[OK: contains "shrunk"]

> look
[OK: contains "Posts Room"]
[OK: contains "wooden posts"]

# ============================================================
# Test 2: Navigate east to Pool Room from Posts Room
# ============================================================

> east
[OK: contains "Pool Room"]

> look
[OK: contains "goop"]
[OK: contains "depressed"]

# Spices should be hidden under the pool
> take spices
[OK: contains "see"]

# ============================================================
# Test 3: Go back west to Posts Room
# ============================================================

> west
[OK: contains "Posts Room"]

# ============================================================
# Test 4: Blue cake teleports back to Tea Room from Posts Room
# ============================================================

> eat blue cake
[OK: contains "normal size"]

> look
[OK: contains "Tea Room"]

# ============================================================
# Test 5: Eat red cake - tastes terrible but no death
# ============================================================

> eat red cake
[OK: contains "terrible"]

# Still alive, still in Tea Room
> look
[OK: contains "Tea Room"]

# ============================================================
# Test 6: Navigate back to Pool Room to throw red cake
# We ate the red cake already, so let's test pool via GDT
# ============================================================

# Need to get another red cake... we ate it already
# Let's test the throwing path with GDT

# First go to Pool Room
> east
[OK: contains "Posts Room"]

> east
[OK: contains "Pool Room"]

# Create a red cake via GDT
> gdt
[OK: contains "GDT ready"]

> ah Tea Room
[OK: contains "Teleported to: Tea Room"]

> ex
[OK: contains "Returning to game"]

# Take the remaining orange cake to verify it's there
# But we need to test pool dissolve... let's navigate back and check spices are hidden
> east
[OK: contains "Posts Room"]

> east
[OK: contains "Pool Room"]

# Verify spices still hidden
> take tin
[OK: contains "see"]

# ============================================================
# Test 7: Tea Room â†’ Posts Room â†’ Pool Room navigation
# ============================================================

> west

> west
[OK: contains "Tea Room"]

> west
[OK: contains "Top of Well"]

> east
[OK: contains "Tea Room"]
