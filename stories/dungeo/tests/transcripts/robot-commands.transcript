title: Robot Commands
story: dungeo
description: Test commanding the robot - matches FORTRAN timefnc.for behavior

---

# Setup - get lantern and teleport to Dingy Closet with robot
# (Avoid Low Room entirely since carousel randomizes exits)
> gdt
[OK: contains "GDT ready"]

> tk brass lantern
[OK: contains "Taken"]

> ah Dingy Closet
[OK: contains "Teleported"]

> ao robot here
[OK: contains "Moved"]

> ex
[OK: contains "Returning to game"]

> switch on lantern
[OK: contains "on"]

# Verify robot is here
> look
[OK: contains "Dingy Closet"]
[OK: contains "robot"]

# Test FOLLOW/STAY commands - these are DUNGEON MASTER commands, NOT robot commands!
# Robot should respond with "stupid robot" message per FORTRAN timefnc.for
> tell robot to follow
[OK: contains "stupid robot"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.stupid_robot"]

> order robot to come
[OK: contains "stupid robot"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.stupid_robot"]

> tell robot to stay
[OK: contains "stupid robot"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.stupid_robot"]

> tell robot to wait
[OK: contains "stupid robot"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.stupid_robot"]

# Test push button when NOT in Machine Room - should fail
> tell robot to push button
[EVENT: true, type="game.message" messageId="dungeo.robot.no_button"]

# Test unknown command - robot can't do it
> tell robot to dance
[OK: contains "stupid robot"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.stupid_robot"]

# Test another unknown command
> order robot to sing a song
[OK: contains "stupid robot"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.stupid_robot"]

# Test known verbs that robot CAN execute (WALK, TAKE, DROP, PUSH, etc.)
# Robot says "Whirr, buzz, click!" then executes the action

# Test robot walk - robot should move to Machine Room (north from Dingy Closet)
> tell robot to go north
[OK: contains "Whirr"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.whirr_buzz_click"]

# Verify robot moved (robot is no longer in Dingy Closet)
> look
[OK: contains "Dingy Closet"]

# Go to Machine Room (north) to verify robot moved there
# prevLocation = Dingy Closet, so carousel exit daemon won't fire
> north
[OK: contains "Machine Room"]
[OK: contains "robot"]

# Test robot take command - robot takes something
# First, drop the lantern so robot can take it
> drop lantern
[OK: contains "Dropped"]

> tell robot to take lantern
[OK: contains "Whirr"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.whirr_buzz_click"]
[EVENT: true, type="game.message" messageId="dungeo.robot.takes_object"]

# Verify lantern is no longer on floor
> look
[OK: contains "Machine Room"]
[OK: contains "robot"]

# Test robot drop command - robot drops the lantern
> tell robot to drop lantern
[OK: contains "Whirr"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.whirr_buzz_click"]
[EVENT: true, type="game.message" messageId="dungeo.robot.drops_object"]

# Take lantern back
> take lantern
[OK: contains "Taken"]

# Test push button - now it should work since robot is in Machine Room
> tell robot to push button
[OK: contains "Whirr"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.whirr_buzz_click"]
[EVENT: true, type="game.message" messageId="dungeo.robot.pushes_button"]
[EVENT: true, type="game.message" messageId="dungeo.robot.carousel_fixed"]

# Try pushing button again - already pushed
> tell robot to press button
[EVENT: true, type="game.message" messageId="dungeo.robot.already_pushed"]

# Test other known verbs - robot says "buzz" (execution depends on context)
> tell robot to throw lantern
[OK: contains "Whirr"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.whirr_buzz_click"]

> tell robot to turn dial
[OK: contains "Whirr"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.whirr_buzz_click"]

> tell robot to leap
[OK: contains "Whirr"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.whirr_buzz_click"]

# Test commanding a non-robot NPC (should fail)
# First, teleport to Cyclops Room
> gdt
[OK: contains "GAME DEBUGGING TOOL"]

> ah Cyclops Room
[OK: contains "Teleported"]

> ex
[OK: contains "Returning to game"]

# Try to command the cyclops
> tell cyclops to dance
[OK: contains "cannot command"]
[EVENT: true, type="game.message" messageId="dungeo.commanding.cant_command"]
