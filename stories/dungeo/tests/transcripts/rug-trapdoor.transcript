title: Rug and Trapdoor Puzzle
story: dungeo
author: Sharpee Team
description: Test moving the rug to reveal the trap door and descending to the Cellar

---

# Navigate to Living Room
> look
[OK: contains "West of House"]

> north
[OK: contains "North of House"]

> east
[OK: contains "Behind House"]

> west
[OK: contains "Kitchen"]

> west
[OK: contains "Living Room"]
[OK: contains "rug"]

# Move the rug to reveal trap door
> push rug
[OK: contains "Moving the rug reveals a trap door"]
[EVENT: true, type="if.event.pushed"]
[EVENT: true, type="game.message" messageId="dungeo.rug.moved.reveal_trapdoor"]
[EVENT: false, type="if.event.destroyed"]
[STATE: true, y08.location = r06]

# Trapdoor should now be visible
> examine trap door
[OK: contains "trap door"]

# Try to go down without opening trap door
> down
[OK: contains "closed"]

# Open the trap door
> open trap door
[OK: contains "open"]

# Get the lantern first (it's dark in the Cellar)
> take lantern
[OK: contains "Taken"]

> switch on lantern
[OK: contains "on"]

# Now descend through the trap door
> down
[OK: contains "Cellar"]

# Can go back up through open trap door
> up
[OK: contains "Living Room"]
