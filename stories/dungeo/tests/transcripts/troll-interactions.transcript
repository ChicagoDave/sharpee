title: Troll Player Interactions
story: dungeo
author: Sharpee Team
description: Test troll-specific player action interceptions (TAKE TROLL, unarmed ATTACK)

---

# Navigate to house and get equipment (lantern AND sword)
> north
[OK: contains "North of House"]

> east
[OK: contains "Behind House"]

> open window
[OK: contains "open"]

> west
[OK: contains "Kitchen"]

> west
[OK: contains "Living Room"]

# Get the lantern
> take lantern
[OK: contains "Taken"]

> switch on lantern
[OK: contains "on"]

# Get the sword - need to get BEFORE going down (trapdoor bars from above)
> take sword
[OK: contains "Taken"]

# Go to Troll Room
> push rug
[OK: contains "trap door"]

> open trapdoor
[OK: contains "open"]

> down
[OK: contains "Cellar"]

> east
[OK: contains "Troll Room"]
[OK: contains "troll"]

# Test 1: TAKE TROLL - should be blocked with spitting response
> take troll
[OK: contains "spits"]
[EVENT: true, type="if.event.take_blocked"]

# Test 2: Drop sword first for unarmed attack test
> drop sword
[OK: contains "Dropped"]

# Test 3: ATTACK TROLL without weapon - blocked by MeleeInterceptor (unarmed)
> attack troll
[OK: contains "suicide"]
[EVENT: true, type="game.message"]

# Alternative: kill troll
> kill troll
[OK: contains "suicide"]
[EVENT: true, type="game.message"]

# Pick up sword to verify armed attack goes through to combat system
> take sword
[OK: contains "Taken"]

# Now attack should work (combat system takes over, not blocked)
# We just test that it doesn't say "laughs" anymore
> attack troll
[FAIL: contains "laughs"]
