title: Troll Combat
story: dungeo
author: Sharpee Team
description: Test killing the troll and the troll attacking the player

---

# Get equipment from Living Room
> north
[OK: contains "North of House"]

> east
[OK: contains "Behind House"]

> open window
[OK: contains "open"]

> west
[OK: contains "Kitchen"]

> west
[OK: contains "Living Room"]

# Get the lantern, sword, and turn on lantern
> take lantern
[OK: contains "Taken"]

> take sword
[OK: contains "Taken"]

> switch on lantern
[OK: contains "on"]

# Go to Troll Room
> push rug
[OK: contains "trap door"]

> open trapdoor
[OK: contains "open"]

> down
[OK: contains "Cellar"]

> east
[OK: contains "Troll Room"]
[OK: contains "troll"]

# Wait one turn - troll should attack us
> z
[EVENT: true, type="npc.attacked"]

# Try "kill troll" - should be recognized as attacking
> kill troll
[EVENT: true, type="if.event.attacked"]

# Try "attack troll" too
> attack troll
[EVENT: true, type="if.event.attacked"]

# The troll should eventually die or we should see combat messages
> kill troll
[EVENT: true, type="if.event.attacked"]

> kill troll
[EVENT: true, type="if.event.attacked"]

> kill troll
[EVENT: true, type="if.event.attacked"]
