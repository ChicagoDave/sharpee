title: Troll Combat
story: dungeo
author: Sharpee Team
description: Test killing the troll, sword glow, and smoke disappear

---

# Get equipment from Living Room
> north
[OK: contains "North of House"]

> east
[OK: contains "Behind House"]

> open window
[OK: contains "open"]

> west
[OK: contains "Kitchen"]

> west
[OK: contains "Living Room"]

# Get the lantern, sword, and turn on lantern
> take lantern
[OK: contains "Taken"]

> take sword
[OK: contains "Taken"]

> switch on lantern
[OK: contains "on"]

# Go to Troll Room
> push rug
[OK: contains "trap door"]

> open trapdoor
[OK: contains "open"]

> down
[OK: contains "Cellar"]

# Enter troll room - sword should glow
> east
[OK: contains "Troll Room"]
[OK: contains "troll"]
[OK: contains "sword"]
[OK: contains "glow"]

# Wait one turn - troll should attack us
> z
[EVENT: true, type="npc.attacked"]

# Attack troll multiple times until dead
> kill troll
[EVENT: true, type="if.event.attacked"]

> attack troll
[EVENT: true, type="if.event.attacked"]

> kill troll
[EVENT: true, type="if.event.attacked"]

> kill troll
[EVENT: true, type="if.event.attacked"]

> kill troll
[EVENT: true, type="if.event.attacked"]

# Eventually troll dies - verify smoke message and sword stops glowing
> look
[NOT: contains "troll"]
[NOT: contains "axe"]
